<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8" />
	<script src="https://unpkg.com/react@16/umd/react.development.js"></script>
	<script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
	<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.2/axios.min.js"></script>
	<title>React Demo</title>
</head>

<body>

	<div id="root"></div>


	<script type="text/babel">


		function Customers() {
			const [customers, setCustomers] = React.useState([]);
			React.useEffect(getCustomers);

			function getCustomers() {
				axios.get("/api/MyApp/GetCustomers").then(function (response) {
					setCustomers(response.data);
				})
			}
			
			function addCustomer() {
				axios.post("/api/MyApp/AddCustomer",{firstName:'Ruffles',lastName:'BlackDog'}).then(function (response) {
					setCustomers(response.data);
				})
			}

			return (
				<div>
					<h2>Customer Count:{customers.length}</h2>
					<div>
						<button onClick={addCustomer}>Click me</button>					
					</div>
					<table>
						<thead>
							<tr><td>First Name</td><td>Last Name</td></tr>
						</thead>
						<tbody>
							{customers.map(customer => <tr key={customer.id}><td>{customer.firstName}</td><td>{customer.lastName}</td></tr>)}
						</tbody>
					</table>

				</div>
			)
		}

		ReactDOM.render(
			<Customers />,
			document.getElementById('root'),
		);

	</script>

</body>

</html>
